package Nomina;

/**
 * CommissionEmployee representa un trabajador cuyo ingreso está basado
 * en ventas y una tasa de comisión.
 */
public class CommissionEmployee {
   private final String firstName;
   private final String lastName;
   private final String socialSecurityNumber;
   private double grossSales; // Ventas brutas mensuales o semanales
   private double commissionRate; // Tasa de comisión (0-1)

   // Constructor completo con validaciones
   public CommissionEmployee(String firstName, String lastName, String socialSecurityNumber,
                             double grossSales, double commissionRate) {
      if (grossSales < 0.0) {
         throw new IllegalArgumentException("Las ventas no pueden ser negativas.");
      }

      if (commissionRate <= 0.0 || commissionRate > 1.0) {
         throw new IllegalArgumentException("La tasa de comisión debe ser > 0.0 y <= 1.0");
      }

      this.firstName = firstName;
      this.lastName = lastName;
      this.socialSecurityNumber = socialSecurityNumber;
      this.grossSales = grossSales;
      this.commissionRate = commissionRate;
   }

   public String getFirstName() {return firstName;}
   public String getLastName() {return lastName;}
   public String getSocialSecurityNumber() {return socialSecurityNumber;}

   public void setGrossSales(double grossSales) {
      if (grossSales < 0.0) {
         throw new IllegalArgumentException("Las ventas no pueden ser negativas.");
      }
      this.grossSales = grossSales;
   }

   public double getGrossSales() {return grossSales;}

   public void setCommissionRate(double commissionRate) {
      if (commissionRate <= 0.0 || commissionRate > 1.0) {
         throw new IllegalArgumentException("La tasa de comisión debe estar entre 0 y 1");
      }
      this.commissionRate = commissionRate;
   }

   public double getCommissionRate() {return commissionRate;}

   // Método adicional: Calcular salario neto
   public double calculateNetEarnings(double taxRate) {
      return earnings() * (1 - taxRate / 100);
   }

   public double earnings() {
      return getCommissionRate() * getGrossSales();
   }

   @Override
   public String toString() {
      return String.format(
         "Empleado %s %s con SSN %s%nVentas Brutas: %.2f%nTasa de Comisión: %.2f",
         firstName, lastName, socialSecurityNumber, grossSales, commissionRate
      );
   }
}
